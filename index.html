<!DOCTYPE html>
<html>
<head>
  <title>Book List</title>
</head>
<body>

<h1>Book List</h1>

<div id="bookList"></div>

<script>
  // Function to fetch and display the book list
  async function fetchAndDisplayBookList() {
    try {
      const response = await fetch('http://localhost:3003/api/books'); // Replace with the actual API endpoint
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }

      const data = await response.json();

      const bookListContainer = document.getElementById("bookList");

      let bookListHTML = "";
      data.forEach(book => {
        bookListHTML += `
          <div class="book">
            <img src="${book.photo}" alt="${book.title}" />
            <h2 class="book-title" data-link="${book._id}">${book.title}</h2>
            <p><strong>Author:</strong> ${book.author}</p>
            <p><strong>Summary:</strong> ${book.summary}</p>
            <p><strong>Price:</strong> ${book.price}</p>
            <p><strong>Publication Year:</strong> ${book.publicationYear}</p>
            <p><strong>Publisher:</strong> ${book.publisher.name}</p>
            <p><strong>Rating:</strong> ${book.rating}</p>
          </div>
        `;
      });

      bookListContainer.innerHTML = bookListHTML;

      // Add click event listeners to the book titles
      const bookTitles = document.querySelectorAll('.book-title');
      bookTitles.forEach(title => {
        title.addEventListener('click', () => {
          const link = title.getAttribute('data-link');
          window.location.href = link;
        });
      });
    } catch (error) {
      console.error('Error fetching book data:', error);
    }
  }

  // Call the function to fetch and display the book list
  fetchAndDisplayBookList();
</script>

</body>
</html>
